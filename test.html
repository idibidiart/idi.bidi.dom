<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>

  <title>idibidiart/idom @ GitHub</title>
 
 <script src='idom.js'></script>

  <!-- github styles -->
  <style type="text/css">
  	
    body {
      margin-top: 1.0em;
      background-color: black;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: green;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
    h1 { font-size: 3.8em; color: #8073ab; margin-bottom: 3px; }
    h1 .small { font-size: 0.4em; }
    h1 a { text-decoration: none }
    h2 { font-size: 1.5em; color: #8073ab; }
    h3 { text-align: center; color: #8073ab; }
    a { color: #8073ab; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    .download { float: right; }
    pre { background: #000; color: #fff; padding: 15px;}
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
     
  </style>
  
  <!-- idom test styles -->
  <style>
    .replacedClassForNodePrototype { background-color: orange; }
    .replacedClassForLinkedNodeListPrototype { background-color: yellow; }
    
    .outputClass { margin-left: 10px; }
    
    .rangeClass {display: inline-block; width: 4px; height: 11px; border: 1px solid}
  </style>
  
</head>

<body>
  <a href="https://github.com/idibidiart/idi.bidi.dom"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkpurple_121621.png" alt="Fork me on GitHub" /></a>

  <div id="container">

    <div class="download">
      <a href="https://github.com/idibidiart/idom/zipball/master">
        <img border="0" width="90" src="https://github.com/images/modules/download/zip.png"></a>
      <a href="https://github.com/idibidiart/idom/tarball/master">
        <img border="0" width="90" src="https://github.com/images/modules/download/tar.png"></a>
    </div>

    <h1><a href="https://github.com/idibidiart/idom">idom</a>
      <span class="small">by <a href="https://github.com/idibidiart">idibidiart</a></span></h1>

    <div class="description">
      DOM Anti-Templating Framework
    </div>
</div>

<pre>

<div style='font-size: 16px; color: green; white-space: pre-wrap;'>

/*! idi.bidi.dom 
* 
* DOM Anti-Templating 
*
* Copyright (c) Marc Fawzi 2012
* 
* http://javacrypt.wordpress.com
*
* BSD License 
* 
* derived from NattyJS v0.08: an open source precursor by the same author 
*
*/

/******************************************************************************
 * 
 * README:
 * 
 * This version works in Gecko and Webkit, not tested on IE
 *
 * idi.bidi.dom - Javascript Anti-Templating 
 *
 * "All the separation and none of the baggage" 
 *
 * What is it? 
 *
 * Data-Driven DOM "Templating" Without The Templates    
 *
 * How Does It Work?
 * 
 * idi.bidi.dom (idom for short) works by caching the virgin innerHTML (the Node 
 * Prototype) of all DOM elements (the Nodes) that have a 'idom-node-id' attribute 
 * at window.onload or $(document).ready. Each Node must contain exactly one direct 
 * child at time of caching, i.e. the Node Prototype, which must contain special 
 * variables (in its inner/outer HTML) to be replaced, in a global, dynamic fashion, 
 * with JSON data (with the scope being the inner/outer HTML of a newly created 
 * instance of the Node Prototype)
 *
 * The Node Prototype may hold an arbitrarily complex DOM structure, and one in 
 * which Node(s) defined elsewhere in the DOM may be dynamically linked by 
 * reference (called Linked Nodes)
 *
 * idom works by creating an instance of the Node Prototype and populating the 
 * special variables in it with dynamic JSON data (where the JSON keys must 
 * correspond to the special variables in the Node Prototype) and then inserting 
 * the newly populated instance into the Node itself, using replace (default on 
 * first insertion), append or prepend methods, as applied to the Node's entire 
 * content (the virgin innerHTML or all populated instances of the Node Prototype
 * that were previously inserted into the Node) or specific, previously inserted
 * instance(s) of the Node Prototype.
 *
 * idom allows the DOM to be decomposed into Nodes each having a Node Prototype
 * from which instances (copies) can be created, populated with JSON data and then 
 * inserted into the Node (in append, prepend, and replace modes, with the 
 * ability to target specific, previously inserted instances of the Node Prototype 
 * or the Node's entire content, i.e. the entire set of instances of the Node 
 * Prototype) and where the Node itself can be *dynamically* linked into other Nodes, 
 * which can be linked into other Nodes, and so on...
 * 
 * From an OOP perspective, idom takes the DOM and adds data-bound variables, 
 * encapsulation, multiple-inheritance and type polymorphism (with the Node 
 * Prototype as the user defined type) 
 *  
 * Unlike other template-less DOM rendering frameworks, idom does not take over 
 * the job of Javascript itself nor does it add any boilerplate, it just gives 
 * Javascript more power by front-ending the DOM.
 *  
 * 
 * Examples: 
 *
 * For now, take a look at test.html
 *
 * See Notes under String.prototype._idomMapValues for the expected JSON format
 * 
 * Main Invocation Pattern
 *
 * .idom$ 
 *
 * document.querySelector('#someNode').idom$(data [, options])
 *
 * behavior: creates new instance of Prototype Node using data to populate the 
 * special variables in Prototype Node, then append/prepend to (or replace) 
 * existing instance(s) in the Node
 *
 * >> data: {key: value, key: value, key: value, etc} 
 * where the keys must match the idom node variables in the Node Prototype minus
 * the idom$ prefix
 *
 * >> options: {mode: 'replace'|'append'|'prepend', targetSelector: value, 
 * ownSelector: value, nodeSelector: value, targetState: value, ownState: value, 
 * nodeState: value}
 *
 * if there no populated instances of Prototype Node exist (or if the Node's 
 * innerHTML was deleted after or before populated instances of Prototype Node 
 * were inserted) then append/prepend/replace will all replace the Node's 
 * entire content (if targetSelector is supplied in this case it will throw 
 * an error, so unless you are sure, you may want to call .$isPopulated() before 
 * invoking this method with targetSelector or stateSelector options)
 *
 * targetSelector: optional idom-selector value for instance(s) of Prototpe Node
 * to insert the new instance at in append and prepend modes. If null, then 
 * append/prepend new instance at last/1st instance
 *
 * targetSelector: optional idom-selector value for instance(s) of Prototpe 
 * Node to insert into in replace mode. If null, replace entire content of Node
 *
 * ownSelector: new value of idom-selector value for instance of Prototpe Node 
 * being inserted
 *
 * ownState: new value of idom-state attribute for instance of Prototpe Node 
 * being inserted
 *
 * targetState: optional idom-selector value for instance of Prototpe Node to in
 * sert at in append and prepend modes targetState: optional idom-selector value
 * for instance of Prototpe Node to insert at in replace mode
 *
 * nodeSelector: new value of idom-selector for the Node itself
 *
 * nodeState: new value of idom-state for the Node itself
 * 
 *
 *********************************************************************************
 * 
 * Other available are methods are 
 *
 * .idom$delete([options]) which can delete certain instances of the Node Prototype 
 * or all instances children (this method is untested as of this release but it 
 * should work fine, report bugs)
 *
 * .idom$isPopulated() may be queried before specifying targetSelector or targetState 
 * to verify existence of populated instance(s) of Node Prototype (the targets) 
 *
 * idom.forEachExec(NodeList) may be used to invoke methods or set properties on
 * each DOM elements in the given NodeList (e.g. returned from a querySelector call)
 * see test.html for relevant use cases 
 * 
 *********************************************************************************/

<div style='font-size: 17px; background-color: rgb(39,39,43);border-radius: 4px; padding: 16px;box-shadow: 0 0 13px rgba(250,250,250, 0.5)'>
The following test operates on the following DOM structure: 
<div style='color: orange'>
&lt;div class='<span>i</span>$someClass' idom-node-id='someNodeList' style='display: none'&gt; <span style='color: purple'>&lt;!-- Start of Node List --&gt;</span>
                	
	&lt;div class='idom$someClass'&gt; <span style='color: purple'>&lt;!-- Start of Node Prototype --&gt;</span>
		&lt;span onclick='idom$someHandler'&gt;idom$someInfo&lt;/span&gt;
		&lt;div class='someClass idom$statusClass' onclick='idom$someHandler'&gt;
		&lt;div id='idom$someDiv'&gt;idom$content&lt;/div&gt;
		&lt;/div&gt;
		<span style='color: yellow'>&lt;!-- @idom someOtherNodeList --&gt;</span>
	&lt;/div&gt; <span style='color: purple'>&lt;!-- End of Node Prototype --&gt;</span>
	
&lt;/div&gt; <span style='color: purple'>&lt;!-- End of Node List --&gt;</span>

&lt;div idom-node-id='<span style='color: yellow'>someOtherNodeList</span>' style='display: none'&gt; <span style='color: purple'>&lt;!-- Start of Node List --&gt;</span>
                	
	&lt;div&gt; <span style='color: purple'>&lt;!-- Start of Node Prototype --&gt;</span>
		&lt;span onclick='idom$someHandler'&gt;idom$someStuff&lt;/span&gt;
	&lt;/div&gt; <span style='color: purple'>&lt;!-- End of Node Prototype --&gt;</span>
	
&lt;/div&gt; <span style='color: purple'>&lt;!-- End of Node List --&gt;</span>
</div>
where <span style='color: orange'>(i)$variables</span> are initialization-time variables and <span style='color: orange'>(idom)$variables</span> are dynamic Node variables 

and using the following Javascript:

// cache DOM elements with idom-node-id (i.e. all node prototypes) and supply values for init() variables (i$var)
idom.init({someClass: 'outputClass'});			

// Selectors are merely the value of the idom-selector attribute within the node (not actual CSS selectors)
// They may match none, one or many populated child nodes. if no populated instances of Node Prototype were 
// inserted into the Node or if the selector string doesn't match any instance then an error is thrown

// The methods themselves can be repeated infinitely, each time creating an instance of the Node Prototype and
// inserting it into the Node


// Start of Test 1

// populate the Node Prototype of the Linked Node first  	
document.querySelector('[idom-node-id=someOtherNodeList]').idom$(
	{
		someStuff: 'dynamically linked content from another node', 
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'replace',
		ownSelector: 'someOtherNodePrototypeInstance',
		nodeSelector: 'someOtherNodeList'
	})

// normal replace on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content 1', 
		content: "node div content 1",
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'replace', 
		ownState: 'iDontWantToBeReplaced', 
		ownSelector: 'NodePrototypeInstance1',
		nodeSelector: 'someNodeList' 
	})

// normal append on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content 3', 
		content: "node div content 3",
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'append', 
		ownState: 'iDontWantToBeReplaced', 
		ownSelector: 'NodePrototypeInstance3' 
	})

// normal prepend on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content 0', 
		content: 'node div content 0',
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'prepend', 
		ownState: 'iDontWantToBeReplaced', 
		ownSelector: 'NodePrototypeInstance0' 
	})
	

// random access append on the Node ... pass Node variables (idom$var)

document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content 2', 
		content: "node div content 2",
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'append', 
		targetSelector: 'NodePrototypeInstance1', 
		ownState: 'viola', 
		ownSelector: 'NodePrototypeInstance2' 
	})

// normal prepend on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content -1', 
		content: "node div content -1",
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'prepend', 
		ownState: 'viola', 
		ownSelector: 'NodePrototypeInstance-1' 
	})

// random access replace on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content sub-0', 
		content: "node div content sub-0",
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'replace', 
		targetSelector: 'NodePrototypeInstance-1', 
		ownState: 'iDontWantToBeReplaced', 
		ownSelector: 'NodePrototypeInstance-sub-zero' 
	})

// random access append on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content -1', 
		content: "node div content -1",
		someHandler: 'clickMe(this)'
	}, {
		mode: 'append', 
		targetSelector: 'NodePrototypeInstance-sub-zero', 
		ownState: 'viola', 
		ownSelector: 'NodePrototypeInstance-1' 
	})

// random access prepend on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content 2.5', 
		content: "node div content 2.5",
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'prepend', 
		targetSelector: 'NodePrototypeInstance3', 
		ownState: 'viola', 
		ownSelector: 'NodePrototypeInstance2.5' 
	})
	

// make visible the Node
document.querySelector('[idom-node-id=someNodeList]').style.display = 'block'

// idom will append "_linked" to the idom-selector and idom-state attributes of Linked Nodes (upon linking) which are 
// otherwise clones of the Nodes being linked (which are left untouched) idom also removes the idom-node-id in the
// Linked Nodes (to avoid conflict with the original Nodes being linked)

// make visible all instances of the Linked Node, using the forEachExec idom method (no eval, safe)
idom.forEachExec(document.querySelectorAll('[idom-selector=someOtherNodeList_linked]'), "style.display = 'block'");

</div>
</div>
</pre>		

<p>click on each line below to see it's details 
</p>
<p>an animated, more complete test will replace this ghetto test soon...
</p>	
<div class='i$someClass' idom-node-id='someNodeList' style='display: none'> <!-- Start of Node List -->       	
	<div class='idom$someClass'> <!-- Start of Node Prototype -->
		<span onclick='idom$someHandler'>idom$someInfo</span><div class='someStaticClass idom$statusClass' onclick='idom$someHandler'><div id='idom$someDiv'>idom$content</div></div>
		<!-- @idom someOtherNodeList -->
	</div> <!-- End of Node Prototype -->
</div> <!-- End of Node List -->

<div idom-node-id='someOtherNodeList' style='display: none'> <!-- Start of Node List -->     	
	<div class='idom$anotherClass'> <!-- Start of Node Prototype -->
		<span onclick='idom$someHandler'>idom$someStuff</span>
	</div> <!-- End of Node Prototype -->
</div> <!-- End of Node List -->

<div style='position: relative; top: 10px'>	
	<input type='button' value="Replace several Node Prototype instances with the same new instance of the Node Prototype and replace Linked Node's Prototype instances with the same new instance of the Linked Node's Prototype" onclick='multiReplace()'/>
	<br>
	<p style='width: 1024px'>The complexity and combinations of test cases and what can be done in terms of manipulating the Node List and its populated elements, including any linked Node Lists, is basically too broad to deal with in a few manually coded examples, so a large number 
		examples will be generated automatically (once I write the test case generator), but for now you can 
		try exploring for yourself and send in your examples. Also, note that there can be an infinite number of operations on each Node List and on each Node Lists within it (or until an error condition is asserted.)
	</p>
<pre>
<div style='font-size: 16px; color: green; white-space: pre-wrap;'>	
<div style='font-size: 17px; background-color: rgb(39,39,43);border-radius: 4px; padding: 16px;box-shadow: 0 0 13px rgba(250,250,250, 0.5)'>
The following test operates on the following DOM structure: 
<div style='color: orange'> 
&lt;div idom-node-id='rangeIndicator' style='width: 200px; 14px: auto; padding: 2px'&gt; <span style='color: purple'>&lt;!-- Start of Node List --&gt;</span>
	<span style='color: purple'>&lt;!-- Start of Node Prototype --&gt;</span>	
	&lt;div class='rangeClass' style='background-color: idom$bgcolor; border-color: idom$bcolor; margin-left: idom$margin'&gt;
	&lt;/div&gt; 
	<span style='color: purple'>&lt;!-- End of Node Prototype --&gt;</span>
	
&lt;/div&gt; <span style='color: purple'>&lt;!-- End of Node List --&gt;</span>
</div>
where <span style='color: orange'>idom$variables</span> are dynamic Node variables 

and using the following Javascript:

var rangeCompleteness = val ? val : 25; 
	
// get the number of steps to highlight in  completion indicator
var steps = Math.round((rangeCompleteness * 12) / 50); 	

if (document.querySelector('[idom-node-id=rangeIndicator]').idom$isPopulated()) {
	 document.querySelector('[idom-node-id=rangeIndicator]').idom$delete()
}
	   
for (var n = 0; n < 12; n++) {
	    
	if (n < steps) {
	
		document.querySelector('[idom-node-id=rangeIndicator]').idom$(
			{
				bgcolor: 'lightblue', 
				bcolor: 'gray',
				margin: n < 2 ? '-1px' : '2px',
			}, {mode: 'append', ownSelector: 'tic' + n})
	} else {
			document.querySelector('[idom-node-id=rangeIndicator]').idom$({
			bgcolor: 'gray', 
			bcolor: 'gray',
			margin: n < 2 ? '-1px' : '2px',
			}, {mode: 'append', ownSelector: 'tic' + n})
			
	}
}

</div>
</div>
</pre>

<input id='range' onchange='setRange(this.value);' type=range
    min=0
    max=50
    value=25
    step=1 />	

	<div class='i$someClass' idom-node-id='rangeIndicator' style='width: 200px; 14px: auto; padding: 2px'>
		
		<div class='rangeClass' style='background-color: idom$bgcolor; border-color: idom$bcolor; margin-left: idom$margin'>
		</div>
	
	</div>
	<div style='position: relative; top: 600px'>__</div>
		
</div>

<script type="text/javascript">

// cache DOM elements with idom-node-id (i.e. all node prototypes) and supply values for init() variables (i$var)
idom.init({someClass: 'outputClass'});			

// Selectors are merely the value of the idom-selector attribute within the node (not actual CSS selectors)
// They may match none, one or many populated child nodes. if no populated instances of Node Prototype were 
// inserted into the Node or if the selector string doesn't match any instance then an error is thrown

// The methods themselves can be repeated infinitely, each time creating an instance of the Node Prototype and
// inserting it into the Node


// Start of Test 1

// populate the Node Prototype of the Linked Node first  	
document.querySelector('[idom-node-id=someOtherNodeList]').idom$(
	{
		someStuff: 'dynamically linked content from another node', 
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'replace',
		ownSelector: 'someOtherNodePrototypeInstance',
		nodeSelector: 'someOtherNodeList'
	})

// normal replace on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content 1', 
		content: "node div content 1",
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'replace', 
		ownState: 'iDontWantToBeReplaced', 
		ownSelector: 'NodePrototypeInstance1',
		nodeSelector: 'someNodeList' 
	})

// normal append on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content 3', 
		content: "node div content 3",
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'append', 
		ownState: 'iDontWantToBeReplaced', 
		ownSelector: 'NodePrototypeInstance3' 
	})

// normal prepend on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content 0', 
		content: 'node div content 0',
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'prepend', 
		ownState: 'iDontWantToBeReplaced', 
		ownSelector: 'NodePrototypeInstance0' 
	})
	

// random access append on the Node ... pass Node variables (idom$var)

document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content 2', 
		content: "node div content 2",
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'append', 
		targetSelector: 'NodePrototypeInstance1', 
		ownState: 'viola', 
		ownSelector: 'NodePrototypeInstance2' 
	})

// normal prepend on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content -1', 
		content: "node div content -1",
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'prepend', 
		ownState: 'viola', 
		ownSelector: 'NodePrototypeInstance-1' 
	})

// random access replace on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content sub-0', 
		content: "node div content sub-0",
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'replace', 
		targetSelector: 'NodePrototypeInstance-1', 
		ownState: 'iDontWantToBeReplaced', 
		ownSelector: 'NodePrototypeInstance-sub-zero' 
	})

// random access append on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content -1', 
		content: "node div content -1",
		someHandler: 'clickMe(this)'
	}, {
		mode: 'append', 
		targetSelector: 'NodePrototypeInstance-sub-zero', 
		ownState: 'viola', 
		ownSelector: 'NodePrototypeInstance-1' 
	})

// random access prepend on the Node ... pass Node variables (idom$var)
document.querySelector('[idom-node-id=someNodeList]').idom$(
	{
		someInfo: 'node span content 2.5', 
		content: "node div content 2.5",
		someHandler: 'clickMe(this)'
	}, 
	{
		mode: 'prepend', 
		targetSelector: 'NodePrototypeInstance3', 
		ownState: 'viola', 
		ownSelector: 'NodePrototypeInstance2.5' 
	})
	

// make visible the Node
document.querySelector('[idom-node-id=someNodeList]').style.display = 'block'

// idom will append "_linked" to the idom-selector and idom-state attributes of Linked Nodes (upon linking) which are 
// otherwise clones of the Nodes being linked (which are left untouched) idom also removes the idom-node-id in the
// Linked Nodes (to avoid conflict with the original Nodes being linked)

// make visible all instances of the Linked Node, using the forEachExec idom method (no eval, safe)
idom.forEachExec(document.querySelectorAll('[idom-selector=someOtherNodeList_linked]'), "style.display = 'block'");

// End of Test 1

// Start of Test 2

function setRange(val) {
	
	var rangeCompleteness = val ? val : 25; 
		
	// get the number of steps to highlight in  completion indicator
	var steps = Math.round((rangeCompleteness * 12) / 50); 
	
	if (document.querySelector('[idom-node-id=rangeIndicator]').idom$isPopulated()) {
	 	document.querySelector('[idom-node-id=rangeIndicator]').idom$delete()
	}
	   
	for (var n = 0; n < 12; n++) {
		    
		if (n < steps) {
		
			document.querySelector('[idom-node-id=rangeIndicator]').idom$(
				{
					bgcolor: 'lightblue', 
					bcolor: 'gray',
					margin: n < 2 ? '-1px' : '2px',
				}, {mode: 'append', ownSelector: 'tic' + n})
		} else {
				document.querySelector('[idom-node-id=rangeIndicator]').idom$({
				bgcolor: 'gray', 
				bcolor: 'gray',
				margin: n < 2 ? '-1px' : '2px',
				}, {mode: 'append', ownSelector: 'tic' + n})
				
		}
	}
}

setRange();

// End of Test 2

// handler functions for Test 1

function multiReplace() {
	
	// populate the Node Prototype of the Linked Node first  	
	document.querySelector('[idom-node-id=someOtherNodeList]').idom$(
	{
		someStuff: 'MODIFIED dynamically linked content from another node', 
		someHandler: 'clickMe(this)',
		anotherClass: 'replacedClassForLinkedNodeListPrototype'
	}, 
	{
		mode: 'replace',
		ownSelector: 'someOtherNodePrototypeInstanceReplaced',
		nodeSelector: 'someOtherNodeListReplaced'
	})
	
	// random access multi-replace on the Node ... pass Node variables (idom$var)
	document.querySelector('[idom-node-id=someNodeList]').idom$(
		{
			someInfo: 'MODIFIED node span content', 
			content: 'MODIFIED node div content',
			someHandler: 'clickMe(this)',
			someClass: 'replacedClassForNodePrototype'
		}, 
		{
			mode: 'replace', 
			targetState: 'viola', 
			ownState: 'violaMODIFIED', 
			ownSelector: 'NodePrototypeInstanceMODIFIED' 
		})
	
	// we just replaced Linked Node in the Node Prototype with its updated instance 
	// so make visible all instances of the Linked Node, using the forEachExec idom method (no eval, safe)		
	idom.forEachExec(document.querySelectorAll('[idom-selector=someOtherNodeListReplaced_linked]'), "style.display = 'block'");
	
}

function clickMe(elem) {
	
	alert('my ownSelector = ' + elem.parentNode.getAttribute("idom-selector") + "\n" + 'my nodeSelector = ' + elem.parentNode.parentNode.getAttribute("idom-selector"))

}
 						
</script>





 </body>
 </html>		